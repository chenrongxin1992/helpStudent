<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->

    <title><%= title %></title>

    <!-- Bootstrap -->
    <link rel='stylesheet' href='/stylesheets/bootstrap.min.css' />
	<link rel='stylesheet' href='/stylesheets/style.css' />
	<link rel='stylesheet' href='/stylesheets/bootstrapValidator.min.css' />

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="http://apps.bdimg.com/libs/html5shiv/3.7/html5shiv.min.js"></script>
      <script src="http://apps.bdimg.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">
		.uniform{
	        padding: 15px 15px;
	    }	
    </style>
  </head>
<body>

<div class="container" >
	<div class="row">
		<div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
          <img src="../images/szucsselogo.png" class="img-responsive" alt="">  
        </div>
        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
		 <!--  <div style="min-height: 70px;"></div> -->
        </div>
	</div>

	<div class="row" style=" padding:0 15px;">
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="background-color: #5cb85c;text-align: center;font-size: 20px; line-height: 24px;">
			请填写你的信息
		</div>
	</div>

	<div class="row uniform">
        <form class="form-horizontal">
          <div class="form-group">
            <label for="majorName" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">课程名</label>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12">
              <input type="text" class="form-control" id="majorName" name="majorName" readonly="readonly">
            </div>
          </div>

          <div class="form-group">
            <label for="stuName" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">辅导学生姓名</label>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12">
              <input type="text" class="form-control" id="stuName" name="stuName" readonly="readonly">
            </div>
          </div>

          <div class="form-group" style="height: 0;overflow: hidden;">
            <label for="stuXueHao" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">辅导学生学号</label>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12">
              <input type="text" class="form-control" id="stuXueHao" name="stuXueHao" readonly="readonly">
            </div>
          </div>
          
          <div class="form-group" style="height: 0;overflow: hidden;">
            <label for="code" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">课程编号</label>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12 meeting_info" id="meeting_date_time">
              <input type="text" class="form-control" id="code" name="code" readonly="readonly">
            </div>
          </div>

          <div class="form-group">
            <label for="teachPlace" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">辅导地点</label>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12 meeting_info" id="meeting_date_time">
              <input type="text" class="form-control" id="teachPlace" name="teachPlace" readonly="readonly">
            </div>
          </div>

          <div class="form-group">
            <label for="teachTime" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">辅导时间</label>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12 meeting_info" id="">
             <input type="text" class="form-control" id="teachTime" name="teachTime" readonly="readonly">
            </div>
          </div>

          <div class="form-group">
            <label for="stuPhoneNum" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">辅导学生联系方式</label>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12">
              <input type="text" class="form-control" id="stuPhoneNum" name="stuPhoneNum" readonly="readonly">
            </div>
          </div>

          <div class="form-group">
            <label for="meeting_nianji" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 control-label" style="text-align: center;">请填写并确认你的信息</label>
          </div>

          <div class="form-group" style="height: 0;overflow: hidden;">
            <label for="xuehao" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">学号</label>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12 meeting_info" id="meeting_date_time">
              <input type="text" class="form-control" id="xuehao" name="xuehao" readonly="readonly">
            </div>
          </div>

          <div class="form-group" style="height: 0;overflow: hidden;">
            <label for="gender" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">性别</label>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12 meeting_info" id="meeting_date_time">
              <input type="text" class="form-control" id="gender" name="gender" readonly="readonly">
            </div>
          </div>

          <div class="form-group">
            <label for="xiaoyuankahao" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">校园卡号</label>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12 meeting_info" id="people_noo">
              <input type="text" class="form-control" id="xiaoyuankahao" name="xiaoyuankahao" readonly="readonly">
            </div>
          </div>

          <div class="form-group">
            <label for="name" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">姓名</label>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12 meeting_info" id="people_noo">
              <input type="text" class="form-control" id="name" name="name" readonly="readonly">
            </div>
          </div>

          <div class="form-group">
            <label for="contact" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">手机号码</label>
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12 meeting_info" id="people_noo">
              <input type="text" class="form-control" id="contact" name="contact" >
            </div>
          </div>

          <div class="form-group">
            <label for="beizhu" class="col-lg-5 col-md-5 col-sm-5 col-xs-12 control-label">备注</label>
	          <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12 meeting_info" id="">
	              <textarea class="form-control" rows="2" id="beizhu"  name="beizhu" placeholder="可为空"></textarea>
	           </div>
	       </div>
          
          <div class="form-group">
            <div class="col-lg-offset-5 col-md-offset-5 col-sm-offset-5  col-lg-5 col-md-5 col-sm-5 col-xs-5 ">
              <button type="submit" class="btn btn-success" id="now-submit">确认选择该学生</button>
            </div>
          </div>

        </form>
      </div>

	<!-- <div class="row text-center">
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
			<div id="page"></div>
		</div>
	</div> -->
</div>

    <script src="/javascripts/jquery-1.11.2.min.js"></script>
    <script src="/javascripts/bootstrap.min.js"></script>
    <script src="/javascripts/bootstrap-paginator.min.js"></script>
    <script type="text/javascript" src='/javascripts/bootstrapValidator.min.js' ></script>
    <script type="text/javascript">
    function GetQueryString(name)
	{
		var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
		var r = window.location.search.substr(1).match(reg);
		if(r!=null)return  unescape(r[2]); return null;
	}
	function br2nl(txt){
        var re=/(<br\s\/>|<br>|<BR>|<BR\/>)/g;
        var s=txt.replace(re,"\n");
        return s;                                  
    }
    $(function(){
	    'use strict';
        //后台传递数据对form表单赋值
          let temp_result = '<%- JSON.stringify(result) %>'
          temp_result = temp_result.replace(/\n/g,'<br />')
              temp_result = JSON.parse(temp_result);
          console.log('temp_result-->',temp_result)

          $('#majorName').val(temp_result.majorName)
          $('#stuName').val(temp_result.stuName)
          $('#code').val(temp_result.code)
          $('#stuXueHao').val(temp_result.stuXueHao)
          $('#teachPlace').val(temp_result.teachPlace)
          $('#teachTime').val(temp_result.teachTime)
          $('#stuPhoneNum').val(temp_result.stuPhoneNum)
          
          $('#xiaoyuankahao').val('<%= student.alias %>')
          $('#name').val('<%= student.cn %>') 
          $('#gender').val('<%= student.gender %>') 
          $('#xuehao').val('<%= student.user %>')
	      
	      //表单验证
          $('form').bootstrapValidator({
  　　　　　　　message: 'This value is not valid',
                submitButtons: 'button[type="submit"]',
                submitHandler: null,
              　feedbackIcons: {
                  　　　　　　　　valid: 'glyphicon glyphicon-ok',
                  　　　　　　　　invalid: 'glyphicon glyphicon-remove',
                  　　　　　　　　validating: 'glyphicon glyphicon-refresh'
              　　　　　　　　   },
                fields: {
                    contact: {
                        message: '手机号码验证失败',
                        validators: {
                            notEmpty: {
                                message: '请输入手机号码!'
                            },
                            regexp: {
	                            regexp: /^1(3|4|5|7|8)\d{9}$/,
	                            message: '请输入正确的手机号'
	                        }
                        }
                    }
                }
          }).on('success.form.bv', function(e) {
            console.log(e)
            e.preventDefault();
            let stuXueHao = $('#stuXueHao').val(),
                code = $('#code').val(),
                contact = $('#contact').val(),
                beizhu = $('#beizhu').val(),
                xiaoyuankahao = $('#xiaoyuankahao').val(),
                gender = $('#gender').val(),
                xuehao = $('#xuehao').val(),
                name = $('#name').val()

            console.log('check args-->',stuXueHao,code,contact,beizhu,xiaoyuankahao,gender,xuehao)
            //提交
            $.ajax({
              url: '/choosestuconfirm', 
              async: true,
              dataType: 'json',
              type: 'POST',
              data: {
                stuXueHao:stuXueHao,
                code:code,
                contact:contact,
                beizhu:beizhu,
                xiaoyuankahao:xiaoyuankahao,
                gender:gender,
                xuehao:xuehao,
                name : name
              },

              success: function(result){
                console.log('submit success')
                console.log(result)
                if(result.errCode == 0){
                  //弹出模态框
                  window.location.href = '/choosestusucess'
                  return  false
                }
              },
              error: function(e){
              	console.log(e)
                console.log("error");
              },
          });
        });
    })
	</script>
  </body>
</html>