<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->

    <title><%= title %></title>

    <!-- Bootstrap -->
    <link rel='stylesheet' href='/stylesheets/bootstrap.min.css' />
	<link rel='stylesheet' href='/stylesheets/style.css' />

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="http://apps.bdimg.com/libs/html5shiv/3.7/html5shiv.min.js"></script>
      <script src="http://apps.bdimg.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">
		
    </style>
  </head>
  <body>

<div class="container-fluid" style="padding: 0 0 ">
	<div class="row-fluid">
		<div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
          <img src="../images/szucsselogo.png" class="img-responsive" alt="">  
        </div>
        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
		  <div style="min-height: 70px;"></div>
        </div>
	</div>

	<div class="row-fluid" style=" padding:0 15px;">
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="background-color: #5cb85c;text-align: center;font-size: 20px; line-height: 24px;">
			辅导 <%=majorName%> 课程的学生名单
		</div>
	</div>

	<div class="row-fluid" id="majorstu">
		<% majorstu.forEach(function(item){ %>
			<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
			 	<!--  <div style="margin: 5px 0;min-height:100px;background-color:red;text-align:center;"> -->
			 	<div class="card card-inverse text-center" style="background-color: #5cb85c; border-color: #5cb85c;" >
				  <div class="card-block">
				    <h4 class="card-title" style="padding-top:7px"><%=item.stuName%></h4>
				  </div>
				  <ul class="list-group list-group-flush">
				    <li class="list-group-item">学号：<%=item.stuXueHao%></li>
				    <li class="list-group-item">电话：<%=item.stuPhoneNum%></li>
				    <li class="list-group-item">辅导地点：<%=item.teachPlace%></li>
				    <li class="list-group-item">辅导时间：<%=item.teachTime%></li>
				    <li class="list-group-item">已选人数：<%=item.chooseNum%></li>
				    <li class="list-group-item">
				    <% if(item.chooseNum == '3'){%>
				    	<a href="#" class="btn btn-primary" disabled="disabled" style="font-size:7px;">选择</a>
				   	<%}else{%>
				   		<a href="#" class="btn btn-primary" class="card-link" style="font-size:7px;">选择</a>
				   	<%}%>
				    </li>
				  </ul>
				</div>			
			  	 <!-- </div> -->
			</div>
		<% }) %>	
	</div>

	<div class="row-fluid text-center">
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
			<div id="page"></div>
		</div>
	</div>
</div>

    <script src="/javascripts/jquery-1.11.2.min.js"></script>
    <script src="/javascripts/bootstrap.min.js"></script>
    <script src="/javascripts/bootstrap-paginator.min.js"></script>
    <script type="text/javascript">
    function GetQueryString(name)
	{
		var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
		var r = window.location.search.substr(1).match(reg);
		if(r!=null)return  unescape(r[2]); return null;
	}
    	$(function(){
            var options={
                bootstrapMajorVersion:1,    //版本
                currentPage:1,    //当前页数
                numberOfPages:5,    //最多显示Page页
                totalPages:'<%- JSON.stringify(totalpage) %>',    //所有数据可以显示的页数
                itemTexts: function(type, page, current) {
                            switch (type) {
                                case "first":
                                    return "首页";
                                case "prev":
                                    return "上一页";
                                case "next":
                                    return "下一页";
                                case "last":
                                    return "末页";
                                case "page":
                                    return page;
                            }
                },
                onPageClicked:function(e,originalEvent,type,page){
                	console.log('选择第几页 -->',page)
                    $.ajax({
                    	url:"/majorstu",
                        type:"POST",
                        async:true,
                        data:{
			                offset:parseInt(page)-1,
			                code:GetQueryString('code')
			            },
			            success:function(result){
			            	console.log('check result -- >',result)
			            	$("#majorstu").html("")
			            	let i = 0
			            	let tempResult = result.result
			            	tempResult.forEach(function(item){
			            		console.log(item.stuName)
			            		
								$("#majorstu").append('<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" id="row'
									+i+'"></div>')
								//$('<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">').appenTo("#majorstu")
								$('#row'+i).append('<div class="card card-inverse text-center" id="card'+i+'"></div>')
								$('#card'+i).append('<div class="card-block" id="card-block'+i+'"></div>')
								$('#card-block'+i).append('<h4 class="card-title" id="card-title'+i+'">'+item.stuName+'</h4>')
								$('#card'+i).append('<ul class="list-group list-group-flush" id="list-group'+i+'"></ul>')
								$('#list-group'+i).append('<li class="list-group-item" id="xuehao'+i+'">学号：'+item.stuXueHao+'</li>')
								$('#list-group'+i).append('<li class="list-group-item" id="dianhua'+i+'">电话：'+item.stuPhoneNum+'</li>')
								$('#list-group'+i).append('<li class="list-group-item" id="fudaodidian'+i+'">辅导地点：'+item.teachPlace+'</li>')
								$('#list-group'+i).append('<li class="list-group-item" id="fudaoshijian'+i+'">辅导时间：'+item.teachTime+'</li>')
								$('#list-group'+i).append('<li class="list-group-item" id="yixuanrenshu'+i+'">已选人数：'+item.chooseNum+'</li>')
								$('#list-group'+i).append('<li class="list-group-item" id="xuanze'+i+'"></li>')
								$('#xuanze'+i).append('<a class="btn btn-primary">选择</a>')
								i++
						    })          	
			            },
			            error:function(error){
			            	console.log('error -- >',error)
			            }
                    })
                }
            }
            $("#page").bootstrapPaginator(options);
        })
	</script>
  </body>
</html>